<div class="content">
    <div class="content-main">
        <div class="row">
            <form class="c-form box-shadow was-validated" [formGroup]="form" (ngSubmit)="submit()">
                <ul>
                    <li class="title">会員情報編集</li>
                    <li class="form-group row d-flex">
                        <label class="col-form-label col-sm-2"><i class="relative">アカウント氏名:<span
                                    class="note-red">*</span></i></label>
                        <div class="col-sm col-sm-10">
                            <input #firstInput type="text" class="form-control" formControlName="employeeLoginId"
                                [required]="isTouchedAndInvalid('employeeLoginId') ? true : false"
                                [ngClass]="{'form-control-invalid': isTouchedAndInvalid('employeeLoginId')}">
                            <div *ngIf="isTouchedAndInvalid('employeeLoginId')">
                                <div class="error-message">{{errorMessage.employeeLoginId}}</div>
                            </div>
                        </div>
                    </li>
                    <li class="form-group row d-flex">
                        <label class="col-form-label col-sm-2"><i class="relative">グループ:<span
                                    class="note-red">*</span></i></label>
                        <div class="col-sm col-sm-10">
                            <select class="form-control" formControlName="departmentId"
                                [required]="isTouchedAndInvalid('departmentId') ? true : false">
                                <option value=''>選択してください</option>
                                <option *ngFor="let item of departments" [value]="item.departmentId">
                                    {{item.departmentName}}
                                </option>
                            </select>
                            <div *ngIf="isTouchedAndInvalid('departmentId')">
                                <div class="error-message">{{errorMessage.departmentId}}</div>
                            </div>
                        </div>
                    </li>
                    <li class="form-group row d-flex">
                        <label class="col-form-label col-sm-2"><i class="relative">氏名:<span
                                    class="note-red">*</span></i></label>
                        <div class="col-sm col-sm-10">
                            <input type="text" class="form-control" formControlName="employeeName"
                                [required]="isTouchedAndInvalid('employeeName') ? true : false">
                            <div *ngIf="isTouchedAndInvalid('employeeName')">
                                <div class="error-message">{{errorMessage.employeeName}}</div>
                            </div>
                        </div>
                    </li>
                    <li class="form-group row d-flex">
                        <label class="col-form-label col-sm-2"><i class="relative">カタカナ氏名:<span
                                    class="note-red">*</span></i></label>
                        <div class="col-sm col-sm-10">
                            <input type="text" class="form-control" formControlName="employeeNameKana"
                                placeholder="ｶﾀｶﾅ" [required]="isTouchedAndInvalid('employeeNameKana') ? true : false">
                            <div *ngIf="isTouchedAndInvalid('employeeNameKana')">
                                <div class="error-message">{{errorMessage.employeeNameKana}}</div>
                            </div>
                            <div *ngIf="form.get('employeeNameKana')?.touched && form.errors?.['kanaInvalid']">
                                <div class="error-message">{{errorMessage.employeeNameKana}}</div>
                            </div>
                        </div>
                    </li>
                    <li class="form-group row d-flex">
                        <label class="col-form-label col-sm-2"><i class="relative">生年月日:<span
                                    class="note-red">*</span></i></label>
                        <div class="col-sm col-sm-10 d-flex">
                            <div class="input-group date datepicker" data-date-format="dd-mm-yyyy">
                                <input class="form-control" type="text" readonly formControlName="employeeBirthDate"
                                    #datePickerBirthdate="bsDatepicker" bsDatepicker
                                    [bsConfig]="{ dateInputFormat: 'YYYY/MM/DD' }"
                                    [required]="isTouchedAndInvalid('employeeBirthDate') ? true : false">
                                <span (click)="datePickerBirthdate.show()" style="margin-left: -15px;"
                                    class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                <div style="margin-left: -220px;" *ngIf="isTouchedAndInvalid('employeeBirthDate')">
                                    <div class="error-message">{{errorMessage.employeeBirthDate}}</div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="form-group row d-flex">
                        <label class="col-form-label col-sm-2"><i class="relative">メールアドレス:<span
                                    class="note-red">*</span></i></label>
                        <div class="col-sm col-sm-10">
                            <input type="text" class="form-control" formControlName="employeeEmail"
                                [required]="isTouchedAndInvalid('employeeEmail') ? true : false">
                            <div *ngIf="isTouchedAndInvalid('employeeEmail')">
                                <div class="error-message">{{errorMessage.employeeEmail}}</div>
                            </div>
                        </div>
                    </li>
                    <li class="form-group row d-flex">
                        <label class="col-form-label col-sm-2"><i class="relative">電話番号:<span
                                    class="note-red">*</span></i></label>
                        <div class="col-sm col-sm-10">
                            <input type="text" class="form-control" formControlName="employeeTelephone"
                                [required]="isTouchedAndInvalid('employeeTelephone') ? true : false">
                            <div *ngIf="isTouchedAndInvalid('employeeTelephone')">
                                <div class="error-message">{{errorMessage.employeeTelephone}}</div>
                            </div>
                        </div>
                    </li>
                    <li class="form-group row d-flex">
                        <label class="col-form-label col-sm-2"><i class="relative">パスワード:
                                <span *ngIf="form.get('employeeId')?.value == ''" class="note-red">*</span></i></label>
                        <div class="col-sm col-sm-10">
                            <input type="password" class="form-control" formControlName="employeeLoginPassword"
                                [required]="isTouchedAndInvalid('employeeLoginPassword') ? true : false">
                            <div *ngIf="isTouchedAndInvalid('employeeLoginPassword')">
                                <div class="error-message">{{errorMessage.employeeLoginPassword}}</div>
                            </div>
                        </div>
                    </li>
                    <li class="form-group row d-flex">
                        <label class="col-form-label col-sm-2"><i class="relative">パスワード（確認）:</i></label>
                        <div class="col-sm col-sm-10">
                            <input type="password" class="form-control" formControlName="employeeLoginConfirmPassword"
                                [required]="isTouchedAndInvalid('employeeLoginConfirmPassword') ? true : false">
                            <div *ngIf="isTouchedAndInvalid('employeeLoginConfirmPassword')">
                                <div class="error-message">{{errorMessage.employeeLoginConfirmPassword}}</div>
                            </div>
                            <div
                                *ngIf="form.get('employeeLoginConfirmPassword')?.touched && form.errors?.['passwordMismatch']">
                                <div class="error-message">{{errorMessage.employeeLoginConfirmPassword}}</div>
                            </div>
                        </div>
                    </li>
                    <li class="title mt-12">日本語能力</li>
                    <div formArrayName="certifications">
                        <div [formGroupName]="0">
                            <li class="form-group row d-flex">
                                <label class="col-form-label col-sm-2"><i class="relative">資格:</i></label>
                                <div class="col-sm col-sm-10">
                                    <select class="form-control" formControlName="certificationId"
                                        (change)="onCertificationIdChange()">
                                        <option value="">選択してください</option>
                                        <option *ngFor="let item of certifications" [value]="item.certificationId">
                                            {{item.certificationName}}
                                        </option>
                                    </select>
                                </div>
                            </li>
                            <li class="form-group row d-flex">
                                <label class="col-form-label col-sm-2"><i class="relative">資格交付日:<span
                                            class="note-red">*</span></i></label>
                                <div class="col-sm col-sm-10 d-flex">
                                    <div id="datepicker" class="input-group date datepicker"
                                        data-date-format="dd-mm-yyyy">
                                        <input class="form-control" readonly formControlName="startDate" type="text"
                                            bsDatepicker [bsConfig]="{ dateInputFormat: 'YYYY/MM/DD' }"
                                            #datePickerStartDate="bsDatepicker"
                                            [required]="isTouchedAndInvalid('certifications.0.startDate') ? true : false">
                                        <span (click)="datePickerStartDate.show()" class="input-group-addon"><i
                                                class="glyphicon glyphicon-calendar"></i></span>
                                        <div style="margin-left: -220px;"
                                            *ngIf="isTouchedAndInvalid('certifications.0.startDate')">
                                            <div class="error-message">{{errorMessage.startDate}}</div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="form-group row d-flex">
                                <label class="col-form-label col-sm-2"><i class="relative">失効日:<span
                                            class="note-red">*</span></i></label>
                                <div class="col-sm col-sm-10 d-flex">
                                    <div class="input-group date datepicker" data-date-format="dd-mm-yyyy">
                                        <input class="form-control" readonly formControlName="endDate" type="text"
                                            bsDatepicker [bsConfig]="{ dateInputFormat: 'YYYY/MM/DD' }"
                                            #datePickerEndDate="bsDatepicker"
                                            [required]="isTouchedAndInvalid('certifications.0.endDate') ? true : false">
                                        <span (click)="datePickerEndDate.show()" class="input-group-addon"><i
                                                class="glyphicon glyphicon-calendar"></i></span>
                                        <div style="margin-left: -220px;"
                                            *ngIf="isTouchedAndInvalid('certifications.0.endDate')">
                                            <div class="error-message">{{errorMessage.endDate}}</div>
                                        </div>
                                        <div style="margin-left: -220px"
                                            *ngIf="form.get('certifications.0.endDate')?.touched && form.errors?.['dateInvalid']">
                                            <div class="error-message" style="width: 350px;">{{errorMessage.endDate}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="form-group row d-flex">
                                <label class="col-form-label col-sm-2"><i class="relative">点数:<span
                                            class="note-red">*</span></i></label>
                                <div class="col-sm col-sm-10">
                                    <input type="text" class="form-control" formControlName="score"
                                        [required]="isTouchedAndInvalid('certifications.0.score') ? true : false">
                                    <div *ngIf="isTouchedAndInvalid('certifications.0.score')">
                                        <div class="error-message">{{errorMessage.score}}</div>
                                    </div>
                                </div>
                            </li>
                        </div>
                    </div>
                    <li class="form-group row d-flex">
                        <div class="btn-group col-sm col-sm-10 ml">
                            <button type="submit" class="btn btn-primary btn-sm">確認</button>
                            <button type="button" class="btn btn-secondary btn-sm" (click)="returnBtn()">戻る</button>
                        </div>
                    </li>
                </ul>
            </form>
        </div>
    </div>
</div>